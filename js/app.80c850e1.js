(function(e){function t(t){for(var r,o,i=t[0],u=t[1],c=t[2],l=0,m=[];l<i.length;l++)o=i[l],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&m.push(a[o][0]),a[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);d&&d(t);while(m.length)m.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,o=1;o<n.length;o++){var i=n[o];0!==a[i]&&(r=!1)}r&&(s.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},o={2:0},a={2:0},s=[];function i(e){return u.p+"js/"+({}[e]||e)+"."+{1:"2a60da30",3:"e88450e4",4:"6b18a500",5:"64cdbae5",6:"22ac59a7"}[e]+".js"}function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={1:1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{1:"47c3eddf",3:"31d6cfe0",4:"31d6cfe0",5:"31d6cfe0",6:"31d6cfe0"}[e]+".css",a=u.p+r,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var c=s[i],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===r||l===a))return t()}var m=document.getElementsByTagName("style");for(i=0;i<m.length;i++){c=m[i],l=c.getAttribute("data-href");if(l===r||l===a)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var r=t&&t.target&&t.target.src||a,s=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=r,delete o[e],d.parentNode.removeChild(d),n(s)},d.href=a;var p=document.getElementsByTagName("head")[0];p.appendChild(d)})).then((function(){o[e]=0})));var r=a[e];if(0!==r)if(r)t.push(r[2]);else{var s=new Promise((function(t,n){r=a[e]=[t,n]}));t.push(r[2]=s);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=i(e);var m=new Error;c=function(t){l.onerror=l.onload=null,clearTimeout(d);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;m.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",m.name="ChunkLoadError",m.type=r,m.request=o,n[1](m)}a[e]=void 0}};var d=setTimeout((function(){c({type:"timeout",target:l})}),12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(t)},u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/nane-client/",u.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var m=0;m<c.length;m++)t(c[m]);var d=l;s.push([0,0]),n()})({0:function(e,t,n){e.exports=n("2f39")},"2f39":function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"fetchAll",(function(){return q})),n.d(r,"addRoom",(function(){return B}));var o={};n.r(o),n.d(o,"fetchByRoom",(function(){return G})),n.d(o,"newMessage",(function(){return X})),n.d(o,"sendMessage",(function(){return ee})),n.d(o,"outdateAll",(function(){return ne}));var a={};n.r(a),n.d(a,"login",(function(){return pe})),n.d(a,"relogin",(function(){return ge})),n.d(a,"loginAsAnonymous",(function(){return ve})),n.d(a,"logout",(function(){return ye})),n.d(a,"switchCurrentUserTo",(function(){return xe}));var s={};n.r(s),n.d(s,"updateConnectionStatus",(function(){return Oe}));var i=n("c973"),u=n.n(i),c=(n("96cf"),n("ac1f"),n("5319"),n("5c7d"),n("7d6e"),n("e54f"),n("985d"),n("4e2f"),n("31cd"),n("2b0e")),l=n("1f91"),m=n("42d2"),d=n("b05d"),p=n("436b"),f=n("2a19");c["a"].use(d["a"],{config:{notify:{}},lang:l["a"],iconSet:m["a"],plugins:{Dialog:p["a"],Notify:f["a"]}});var g,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"q-app"}},[n("router-view")],1)},v=[],w=n("ded3"),y=n.n(w),b=n("2f62"),x={name:"App",data:function(){return{}},computed:y()(y()(y()({},Object(b["c"])("room",{isRoomExistInRoomList:"isRoomExist"})),Object(b["c"])("user",{isLoggedIn:"isLoggedIn"})),Object(b["c"])("settings",{isNoConnection:"isNoConnection"})),created:function(){var e=this;return u()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$options.sockets.onopen=u()(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.updateConnectionStatus(null===(n=e.$socket)||void 0===n?void 0:n.readyState);case 2:case"end":return t.stop()}}),t)}))),e.$options.sockets.onclose=function(){var t=u()(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.updateConnectionStatus(null===(r=e.$socket)||void 0===r?void 0:r.readyState);case 2:return t.next=4,e.outdateAllMessages();case 4:setTimeout(u()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isNoConnection){t.next=3;break}return t.next=3,e.relogin();case 3:case"end":return t.stop()}}),t)}))),1e3);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.$options.sockets.onmessage=e.onNewMessage,t.next=5,e.loginAsAnonymous();case 5:case"end":return t.stop()}}),t)})))()},methods:y()(y()(y()(y()(y()({},Object(b["b"])("message",{outdateAllMessages:"outdateAll",newMessage:"newMessage"})),Object(b["b"])("room",{addRoom:"addRoom"})),Object(b["b"])("user",{loginAsAnonymous:"loginAsAnonymous",relogin:"relogin"})),Object(b["b"])("settings",{updateConnectionStatus:"updateConnectionStatus"})),{},{onNewMessage:function(e){var t=this;return u()(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.data,o=JSON.parse(r),t.isRoomExistInRoomList(o.room)){n.next=5;break}return n.next=5,t.addRoom({name:o.room,last_message:o});case 5:return n.abrupt("return",t.newMessage(o));case 6:case"end":return n.stop()}}),n)})))()}})},R=x,k=n("2877"),S=Object(k["a"])(R,h,v,!1,null,null,null),C=S.exports,M=function(){return{rooms:[]}},_=(n("b0c0"),{getRooms:function(e){return e.rooms},isRoomExist:function(e){return function(t){return e.rooms.some((function(e){var n=e.name;return n===t}))}}}),O=n("9523"),T=n.n(O),E=(n("4e82"),"SET_ALL"),L="ADD_ROOM",A=(g={},T()(g,E,(function(e,t){e.rooms=t.sort((function(e,t){return e.name.localeCompare(t.name)}))})),T()(g,L,(function(e,t){e.rooms.push(t)})),g),j=(n("d81d"),n("bc3a")),I=n.n(j);function q(e){return N.apply(this,arguments)}function N(){return N=u()(regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,I.a.get("/rooms");case 3:r=e.sent,o=r.data.result,n(E,o.map((function(e){return y()(y()({},e),{},{last_message:y()(y()({},e.last_message),{},{created:new Date(e.created)})})})));case 6:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function B(e,t){return U.apply(this,arguments)}function U(){return U=u()(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t.commit,r(L,y()(y()({},n),{},{last_message:y()(y()({},n.last_message),{},{created:new Date(n.created)})}));case 2:case"end":return e.stop()}}),e)}))),U.apply(this,arguments)}var $,D={namespaced:!0,state:M,getters:_,mutations:A,actions:r},P=function(){return{messagesByRoom:{}}},Q={getMessagesByRoom:function(e){return function(t){var n,r;return null!==(n=null===(r=e.messagesByRoom[t])||void 0===r?void 0:r.messages)&&void 0!==n?n:[]}},isMessagesOutdated:function(e){return function(t){var n,r;return null===(n=null===(r=e.messagesByRoom[t])||void 0===r?void 0:r.isOutdated)||void 0===n||n}},isRoomExist:function(e){return function(t){return e.messagesByRoom[t]}}},z=n("278c"),K=n.n(z),V=(n("4fad"),"SET_ALL_FOR_ROOM"),H="SET_ALL_OUTDATED",J="ADD_MESSAGE",Y="SET_ROOM",F=($={},T()($,V,(function(e,t){var n=e.messagesByRoom,r=t.roomId,o=t.messages;c["a"].set(n,r,y()(y()({},n[r]),{},{isOutdated:!1,messages:o}))})),T()($,H,(function(e){for(var t=e.messagesByRoom,n=0,r=Object.entries(t);n<r.length;n++){var o=K()(r[n],2),a=o[1];a.isOutdated=!0}})),T()($,J,(function(e,t){var n=e.messagesByRoom;n[t.room].messages.push(t)})),T()($,Y,(function(e,t){var n=e.messagesByRoom;c["a"].set(n,t,{isOutdated:!0,messages:[]})})),$);function G(e,t){return W.apply(this,arguments)}function W(){return W=u()(regeneratorRuntime.mark((function e(t,n){var r,o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,I.a.get("rooms/".concat(n,"/history"));case 3:o=e.sent,a=o.data.result,r(V,{roomId:n,messages:a.map((function(e){return y()(y()({},e),{},{id:e.room+e.sender.username+e.created,created:new Date(e.created)})})).sort((function(e,t){return e.created-t.created}))});case 6:case"end":return e.stop()}}),e)}))),W.apply(this,arguments)}function X(e,t){return Z.apply(this,arguments)}function Z(){return Z=u()(regeneratorRuntime.mark((function e(t,n){var r,o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t.commit,o=t.getters,a=y()(y()({},n),{},{id:n.room+n.sender.username+n.created,created:new Date(n.created)}),o.isRoomExist(a.room)||r(Y,a.room),r(J,a);case 4:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}function ee(e,t){return te.apply(this,arguments)}function te(){return te=u()(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.commit,t.getters,this._vm.$socket.sendObj(n);case 2:case"end":return e.stop()}}),e,this)}))),te.apply(this,arguments)}function ne(e){return re.apply(this,arguments)}function re(){return re=u()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.commit,n(H);case 2:case"end":return e.stop()}}),e)}))),re.apply(this,arguments)}var oe,ae={namespaced:!0,state:P,getters:Q,mutations:F,actions:o},se=function(){return{currentUser:null,users:[]}},ie={getUsers:function(e){return e.users},getCurrentUser:function(e){return e.currentUser},isLoggedIn:function(e){return e.currentUser}},ue=(n("4de4"),"SET_CURRENT_USER"),ce="DELETE_CURRENT_USER",le="ADD_USER",me="DELETE_USER",de=(oe={},T()(oe,ue,(function(e,t){e.currentUser=t})),T()(oe,ce,(function(e){e.currentUser=null})),T()(oe,me,(function(e,t){e.users=e.users.filter((function(e){var n=e.username;return n!==t.username}))})),T()(oe,le,(function(e,t){e.users.push(t)})),oe);n("7db0");function pe(e,t){return fe.apply(this,arguments)}function fe(){return fe=u()(regeneratorRuntime.mark((function e(t,n){var r,o,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.commit,o=t.dispatch,a=t.getters,s={username:n},"anonymous"!==s.username){e.next=4;break}return e.abrupt("return",o("loginAsAnonymous"));case 4:this._vm.$disconnect(),this._vm.$connect("wss://nane.tada.team/ws"+"?username=".concat(s.username),{connectManually:!0,reconnection:!1,format:"json"}),r(ue,s),a.getUsers.some((function(e){return e.username===s.username}))||r(le,s);case 8:case"end":return e.stop()}}),e,this)}))),fe.apply(this,arguments)}function ge(e){return he.apply(this,arguments)}function he(){return he=u()(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.dispatch,r=t.getters,r.isLoggedIn){e.next=3;break}return e.abrupt("return",n("loginAsAnonymous"));case 3:return e.abrupt("return",n("login",r.getCurrentUser.username));case 4:case"end":return e.stop()}}),e)}))),he.apply(this,arguments)}function ve(e){return we.apply(this,arguments)}function we(){return we=u()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.commit,this._vm.$disconnect(),this._vm.$connect("wss://nane.tada.team/ws?username=anonymous",{connectManually:!0,reconnection:!1,format:"json"}),n(ce);case 4:case"end":return e.stop()}}),e,this)}))),we.apply(this,arguments)}function ye(e){return be.apply(this,arguments)}function be(){return be=u()(regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,r=t.getters,o=t.commit,r.isLoggedIn&&o(me,r.getCurrentUser),e.next=4,n("loginAsAnonymous");case 4:case"end":return e.stop()}}),e)}))),be.apply(this,arguments)}function xe(e,t){return Re.apply(this,arguments)}function Re(){return Re=u()(regeneratorRuntime.mark((function e(t,n){var r,o,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.commit,o=t.getters,a=t.dispatch,s=o.getUsers.find((function(e){return e.username===n})),s){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,a("login",s.username);case 6:r(ue,s);case 7:case"end":return e.stop()}}),e)}))),Re.apply(this,arguments)}var ke={namespaced:!0,state:se,getters:ie,mutations:de,actions:a},Se=function(){return{connectionStatus:0,maxLength:{message:10500,roomName:50,username:50},pageSize:15}},Ce={isNoConnection:function(e){return 1!==e.connectionStatus},getMaxLengthSettings:function(e){return e.maxLength},getPageSize:function(e){return e.pageSize}},Me="SET_CONNECTION_STATUS",_e=T()({},Me,(function(e,t){e.connectionStatus=null!==t&&void 0!==t?t:3}));function Oe(e,t){return Te.apply(this,arguments)}function Te(){return Te=u()(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t.commit,r(Me,n);case 2:case"end":return e.stop()}}),e)}))),Te.apply(this,arguments)}var Ee={namespaced:!0,state:Se,getters:Ce,mutations:_e,actions:s};c["a"].use(b["a"]);var Le=function(){var e=new b["a"].Store({strict:!1,modules:{room:D,message:ae,user:ke,settings:Ee}});return e},Ae=n("8c4f"),je=(n("e260"),n("d3b7"),n("e6cf"),n("3ca3"),n("ddb0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"relative-position column no-wrap"},[n("div",{staticClass:"col"},[n("q-infinite-scroll",{ref:"chatScroll",staticClass:"col full-height column no-wrap scroll relative-position q-px-xs-sm q-pl-md-md bg-grey-3",attrs:{offset:500,reverse:""},on:{load:e.loadMore}},[n("template",{slot:"loading"},[n("div",{staticClass:"row justify-center q-my-md"},[n("q-spinner",{attrs:{color:"primary",name:"dots",size:"40px"}})],1)]),n("q-inner-loading",{staticClass:"bg-grey-3",attrs:{showing:e.isMessagesLoading}},[n("q-spinner-tail",{attrs:{color:"primary",size:"2em"}})],1),n("q-space",{staticClass:"col"}),n("div",{staticClass:"row"},e._l(e.messagesToShow,(function(e){return n("chat-message",{key:e.id,staticClass:"col-12 col-md-7",attrs:{message:e}})})),1)],2)],1),e.isLoggedIn?n("q-toolbar",{staticClass:"col-auto row q-py-xs text-black"},[n("q-input",{staticClass:"col-grow q-mr-sm",attrs:{maxlength:e.maxLength.message,"input-style":"max-height:50vh",rounded:"",outlined:"",dense:"",autogrow:"","bg-color":"white",placeholder:"Type a message (Ctrl+Enter to send)"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onInputEnterKey(t)}},model:{value:e.messageToSendText,callback:function(t){e.messageToSendText=t},expression:"messageToSendText"}}),n("q-btn",{attrs:{round:"",disable:e.isNoConnection,flat:"",color:"primary",icon:"send"},on:{click:e.sendNewMessage}})],1):n("q-toolbar",{staticClass:"col-auto row q-py-xs text-black"},[n("q-btn",{staticClass:"col",attrs:{rounded:"","no-caps":"",unelevated:"",disable:e.isNoConnection,color:"white","text-color":"primary",label:"Join"},on:{click:function(t){return e.$emit("ask-login")}}})],1)],1)}),Ie=[],qe=(n("fb6a"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-item",{staticClass:"q-my-md rounded-borders chat__message",class:{chat__message_bg_my:e.isMyMessage},attrs:{dark:e.isMyMessage}},[n("q-item-section",[n("q-item-label",[n("span",{staticClass:"text-weight-bold"},[e._v(e._s(e.message.sender.username))])]),n("q-item-label",[e._v("\n      "+e._s(e.message.text)+"\n    ")]),n("q-item-label",{staticClass:"text-right",attrs:{caption:""}},[n("span",{},[e._v(e._s(e.timestamp))])])],1),e.loading?n("q-item-section",{attrs:{side:""}},[n("div",{staticClass:"row justify-end q-my-md"},[n("q-spinner",{attrs:{color:"primary",name:"dots",size:"20px"}})],1)]):e._e()],1)}),Ne=[],Be=n("bd4c"),Ue={props:{message:{required:!0,type:Object,default:function(){return null}},loading:{type:Boolean,default:!1}},data:function(){return{}},computed:{timestamp:function(){return Be["a"].formatDate(this.message.created,"HH:mm DD-MM-YYYY")},isMyMessage:function(){return!1}}},$e=Ue,De=(n("3142"),n("66e5")),Pe=n("4074"),Qe=n("0170"),ze=n("0d59"),Ke=n("eebe"),Ve=n.n(Ke),He=Object(k["a"])($e,qe,Ne,!1,null,null,null),Je=He.exports;Ve()(He,"components",{QItem:De["a"],QItemSection:Pe["a"],QItemLabel:Qe["a"],QSpinner:ze["a"]});var Ye={components:{ChatMessage:Je},beforeRouteUpdate:function(e,t,n){var r=this;return u()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n(),r.pagesLoaded=1,r.$refs.chatScroll.reset(),r.$refs.chatScroll.resume(),t.next=6,r.loadRoomMessages(e.params.roomId);case 6:r.scrollChatToBottom();case 7:case"end":return t.stop()}}),t)})))()},data:function(){return{pagesLoaded:1,isMessagesLoading:!0,messageToSendText:""}},computed:y()(y()(y()(y()({},Object(b["c"])("user",{isLoggedIn:"isLoggedIn",getCurrentUser:"getCurrentUser"})),Object(b["c"])("message",{getMessagesByRoom:"getMessagesByRoom",isMessagesOutdated:"isMessagesOutdated"})),Object(b["c"])("settings",{isNoConnection:"isNoConnection",maxLength:"getMaxLengthSettings",pageSize:"getPageSize"})),{},{isRoomMessagesOutdated:function(){return this.isMessagesOutdated(this.roomId)},roomId:function(){return this.$route.params.roomId},messagesToShow:function(){return this.getMessagesByRoom(this.roomId).slice(-this.messagesToShowCount)},messagesTotalCount:function(){return this.getMessagesByRoom(this.roomId).length},messagesToShowCount:function(){return this.pageSize*this.pagesLoaded}}),watch:{isNoConnection:function(e,t){var n=this;return u()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e){t.next=3;break}return t.next=3,n.loadRoomMessages(n.roomId);case 3:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return u()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadRoomMessages(e.roomId);case 2:e.scrollChatToBottom();case 3:case"end":return t.stop()}}),t)})))()},methods:y()(y()({},Object(b["b"])("message",{fetchByRoom:"fetchByRoom",sendMessage:"sendMessage"})),{},{loadRoomMessages:function(e){var t=this;return u()(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e&&t.isMessagesOutdated(e)){n.next=3;break}return t.isMessagesLoading=!1,n.abrupt("return");case 3:return t.isMessagesLoading=!0,n.next=6,t.fetchByRoom(e);case 6:t.isMessagesLoading=!1,t.$refs.chatScroll.resume();case 8:case"end":return n.stop()}}),n)})))()},scrollChatToBottom:function(){var e=this.$refs.chatScroll.$el;e.scrollTop=e.scrollHeight},loadMore:function(e,t){this.pagesLoaded=e;var n=this.messagesTotalCount<=this.messagesToShowCount;t(n)},onInputEnterKey:function(e){var t=this;return u()(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e.ctrlKey&&!e.metaKey||13!==e.keyCode&&10!==e.keyCode){n.next=3;break}return n.next=3,t.sendNewMessage();case 3:case"end":return n.stop()}}),n)})))()},sendNewMessage:function(){var e=this;return u()(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isNoConnection){t.next=2;break}return t.abrupt("return");case 2:return n={created:new Date,sender:{username:e.getCurrentUser.username},room:e.roomId,text:e.messageToSendText},t.next=5,e.sendMessage(n);case 5:e.messageToSendText="";case 6:case"end":return t.stop()}}),t)})))()}})},Fe=Ye,Ge=n("ef35"),We=n("74f7"),Xe=n("007d"),Ze=n("2c91"),et=n("65c6"),tt=n("27f9"),nt=n("9c40"),rt=Object(k["a"])(Fe,je,Ie,!1,null,null,null),ot=rt.exports;Ve()(rt,"components",{QInfiniteScroll:Ge["a"],QSpinner:ze["a"],QInnerLoading:We["a"],QSpinnerTail:Xe["a"],QSpace:Ze["a"],QToolbar:et["a"],QInput:tt["a"],QBtn:nt["a"]});var at=[{path:"/",component:function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,"713b"))},children:[{path:"",component:function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,"8b24"))},children:[{path:"",name:"index",components:{"room-list-panel":function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"8909"))},"chat-panel":function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,"bfd3"))}}},{path:"room/:roomId",name:"room",components:{"room-list-panel":function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"8909"))},"chat-panel":ot}}]}]},{path:"*",component:function(){return n.e(5).then(n.bind(null,"e51e"))}}],st=at;c["a"].use(Ae["a"]);var it=function(){var e=new Ae["a"]({scrollBehavior:function(){return null},routes:st,mode:"history",base:"/nane-client/"});return e},ut=function(){return ct.apply(this,arguments)};function ct(){return ct=u()(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("function"!==typeof Le){e.next=6;break}return e.next=3,Le({Vue:c["a"]});case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=Le;case 7:if(t=e.t0,"function"!==typeof it){e.next=14;break}return e.next=11,it({Vue:c["a"],store:t});case 11:e.t1=e.sent,e.next=15;break;case 14:e.t1=it;case 15:return n=e.t1,t.$router=n,r={router:n,store:t,render:function(e){return e(C)}},r.el="#q-app",e.abrupt("return",{app:r,store:t,router:n});case 20:case"end":return e.stop()}}),e)}))),ct.apply(this,arguments)}var lt=function(){var e=u()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.Vue,I.a.defaults.baseURL="https://nane.tada.team/api",n.prototype.$axios=I.a;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),mt=n("b408"),dt=n.n(mt),pt=function(){var e=u()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.Vue,n.use(dt.a,"wss://nane.tada.team/ws?username=anonymous",{connectManually:!0,reconnection:!1,format:"json"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ft="/nane-client/",gt=/\/\//,ht=function(e){return(ft+e).replace(gt,"/")};function vt(){return wt.apply(this,arguments)}function wt(){return wt=u()(regeneratorRuntime.mark((function e(){var t,n,r,o,a,s,i,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ut();case 2:t=e.sent,n=t.app,r=t.store,o=t.router,a=!1,s=function(e){a=!0;var t=Object(e)===e?ht(o.resolve(e).route.fullPath):e;window.location.href=t},i=window.location.href.replace(window.location.origin,""),u=[lt,pt],l=0;case 11:if(!(!1===a&&l<u.length)){e.next=29;break}if("function"===typeof u[l]){e.next=14;break}return e.abrupt("continue",26);case 14:return e.prev=14,e.next=17,u[l]({app:n,router:o,store:r,Vue:c["a"],ssrContext:null,redirect:s,urlPath:i,publicPath:ft});case 17:e.next=26;break;case 19:if(e.prev=19,e.t0=e["catch"](14),!e.t0||!e.t0.url){e.next=24;break}return window.location.href=e.t0.url,e.abrupt("return");case 24:return console.error("[Quasar] boot error:",e.t0),e.abrupt("return");case 26:l++,e.next=11;break;case 29:if(!0!==a){e.next=31;break}return e.abrupt("return");case 31:new c["a"](n);case 32:case"end":return e.stop()}}),e,null,[[14,19]])}))),wt.apply(this,arguments)}vt()},3142:function(e,t,n){"use strict";n("63f5")},"31cd":function(e,t,n){},"63f5":function(e,t,n){}});