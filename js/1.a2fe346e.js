(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"2c3d":function(e,t,n){},"838c":function(e,t,n){"use strict";n("2c3d")},8909:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-scroll-area",[n("q-list",{attrs:{separator:""}},[n("q-item-label",{staticClass:"text-grey-8 row items-center",attrs:{header:""}},[n("q-btn",{attrs:{disable:e.isNoConnection,outline:"",rounded:"","no-caps":"",color:"primary",icon:"add",label:"Add Room"},on:{click:e.onAddRoom}})],1),e._l(e.rooms,(function(e){return n("room-list-item",{key:e.name,attrs:{room:e}})}))],2)],1)},r=[],a=n("c973"),s=n.n(a),i=n("ded3"),c=n.n(i),l=(n("d3b7"),n("e6cf"),n("96cf"),n("2f62")),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-item",{staticClass:"room-list__item",attrs:{clickable:"",to:e.routeTo,replace:e.isChatOpened}},[n("q-item-section",[n("q-item-label",[e._v("\n      "+e._s(e.room.name)+"\n    ")]),n("q-item-label",{staticClass:"ellipsis",attrs:{caption:""}},[e._v("\n      @"+e._s(e.lastMessage.sender.username)+" - "+e._s(e.lastMessage.text)+"\n    ")])],1)],1)},u=[],d=(n("b0c0"),{props:{room:{required:!0,type:Object,default:function(){return null}}},data:function(){return{}},computed:c()(c()({},Object(l["c"])("message",{getMessagesByRoom:"getMessagesByRoom"})),{},{isChatOpened:function(){return!!this.$route.params.roomId},lastMessage:function(){var e=this.getMessagesByRoom(this.room.name),t=e[e.length-1];return null!==t&&void 0!==t?t:this.room.last_message},routeTo:function(){return"room"===this.$route.name&&this.$route.params.roomId===this.room.name?{name:"index"}:{name:"room",params:{roomId:this.room.name}}}})}),g=d,f=(n("838c"),n("2877")),h=n("66e5"),p=n("4074"),b=n("0170"),x=n("eebe"),v=n.n(x),q=Object(f["a"])(g,m,u,!1,null,null,null),C=q.exports;v()(q,"components",{QItem:h["a"],QItemSection:p["a"],QItemLabel:b["a"]});var R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-dialog",{ref:"dialog",on:{hide:e.onDialogHide}},[n("q-card",{staticClass:"q-dialog-plugin"},[n("q-card-section",[n("q-input",{ref:"roomNameInput",attrs:{filled:"",autofocus:"",label:"Room Name","lazy-rules":"",maxlength:e.maxLength.roomName,rules:[function(e){return e&&e.length>0||"Please enter the name of the room"},function(t){return!e.rooms.some((function(e){return e.name===t}))||"Room is already exist"}]},model:{value:e.roomName,callback:function(t){e.roomName=t},expression:"roomName"}})],1),n("q-card-section",[n("q-input",{ref:"messageTextInput",attrs:{maxlength:e.maxLength.message,"input-style":"max-height:50vh",outlined:"",rounded:"",autogrow:"","bg-color":"white",placeholder:"Type a message",label:"First Message",rules:[function(e){return e&&e.length>0||"Please type something"}]},model:{value:e.firstMessage,callback:function(t){e.firstMessage=t},expression:"firstMessage"}})],1),n("q-card-actions",{attrs:{align:"right"}},[n("q-btn",{attrs:{color:"primary",label:"Cancel",flat:""},on:{click:e.onCancel}}),n("q-btn",{attrs:{color:"primary",label:"Add",rounded:"",outline:""},on:{click:e.onSubmit}})],1)],1)],1)},w=[],y={name:"CreateRoomForm",props:{rooms:{required:!0,type:Array,default:function(){return[]}},currentUsername:{required:!0,type:String,default:null}},data:function(){return{roomName:"",firstMessage:"Room created"}},computed:c()({},Object(l["c"])("settings",{maxLength:"getMaxLengthSettings"})),methods:{show:function(){this.$refs.dialog.show()},hide:function(){this.$refs.dialog.hide()},onDialogHide:function(){this.$emit("hide")},onSubmit:function(){var e={created:new Date,sender:{username:this.currentUsername},room:this.roomName,text:this.firstMessage};this.$refs.roomNameInput.validate()&&this.$refs.messageTextInput.validate()&&(this.$emit("ok",e),this.hide())},onCancel:function(){this.hide()}}},I=y,k=n("24e8"),M=n("f09f"),$=n("a370"),_=n("27f9"),O=n("4b7e"),Q=n("9c40"),N=Object(f["a"])(I,R,w,!1,null,null,null),j=N.exports;v()(N,"components",{QDialog:k["a"],QCard:M["a"],QCardSection:$["a"],QInput:_["a"],QCardActions:O["a"],QBtn:Q["a"]});var L={components:{RoomListItem:C},data:function(){return{}},computed:c()(c()(c()({},Object(l["c"])("room",{rooms:"getRooms"})),Object(l["c"])("user",{isLoggedIn:"isLoggedIn",getCurrentUser:"getCurrentUser"})),Object(l["c"])("settings",{isNoConnection:"isNoConnection"})),created:function(){var e=this;return s()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchAllRooms();case 2:case"end":return t.stop()}}),t)})))()},methods:c()(c()(c()({},Object(l["b"])("room",{fetchAllRooms:"fetchAll"})),Object(l["b"])("message",{sendMessage:"sendMessage"})),{},{openCreateRoomDialog:function(){var e=this;return new Promise((function(t,n){return e.$q.dialog({component:j,rooms:e.rooms,currentUsername:e.getCurrentUser.username,parent:e}).onOk(t).onCancel(n)}))},onAddRoom:function(){var e=this;return s()(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isLoggedIn){t.next=2;break}return t.abrupt("return",e.$emit("ask-login"));case 2:return t.prev=2,t.next=5,e.openCreateRoomDialog();case 5:return n=t.sent,t.next=8,e.sendMessage(n);case 8:e.$router.push({name:"room",params:{roomId:n.room}}),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),t.t0&&console.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,11]])})))()}})},A=L,S=n("4983"),D=n("1c1c"),U=Object(f["a"])(A,o,r,!1,null,null,null);t["default"]=U.exports;v()(U,"components",{QScrollArea:S["a"],QList:D["a"],QItemLabel:b["a"],QBtn:Q["a"]})}}]);