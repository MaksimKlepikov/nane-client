(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"2c3d":function(e,t,o){},"838c":function(e,t,o){"use strict";o("2c3d")},8909:function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-scroll-area",[o("q-list",{attrs:{separator:""}},[o("q-item-label",{staticClass:"text-grey-8 row items-center",attrs:{header:""}},[o("q-btn",{attrs:{disable:e.isNoConnection,outline:"",rounded:"","no-caps":"",color:"primary",icon:"add",label:"Add Room"},on:{click:e.onAddRoom}})],1),e._l(e.rooms,(function(e){return o("room-list-item",{key:e.name,attrs:{room:e}})}))],2)],1)},r=[],a=o("c973"),s=o.n(a),i=o("ded3"),c=o.n(i),l=(o("d3b7"),o("e6cf"),o("96cf"),o("2f62")),m=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-item",{staticClass:"room-list__item",attrs:{clickable:"",to:e.routeTo,replace:e.isChatOpened}},[o("q-item-section",[o("q-item-label",[e._v("\n      "+e._s(e.room.name)+"\n    ")]),o("q-item-label",{staticClass:"ellipsis",attrs:{caption:""}},[e._v("\n      @"+e._s(e.lastMessage.sender.username)+" - "+e._s(e.lastMessage.text)+"\n    ")])],1)],1)},u=[],d=(o("b0c0"),{props:{room:{required:!0,type:Object,default:function(){return null}}},data:function(){return{}},computed:c()(c()({},Object(l["c"])("message",{getMessagesByRoom:"getMessagesByRoom"})),{},{isChatOpened:function(){return!!this.$route.params.roomId},lastMessage:function(){var e=this.getMessagesByRoom(this.room.name),t=e[e.length-1];return null!==t&&void 0!==t?t:this.room.last_message},routeTo:function(){return"room"===this.$route.name&&this.$route.params.roomId===this.room.name?{name:"index"}:{name:"room",params:{roomId:this.room.name}}}})}),g=d,f=(o("838c"),o("2877")),h=o("66e5"),p=o("4074"),b=o("0170"),x=o("eebe"),v=o.n(x),q=Object(f["a"])(g,m,u,!1,null,null,null),C=q.exports;v()(q,"components",{QItem:h["a"],QItemSection:p["a"],QItemLabel:b["a"]});var R=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-dialog",{ref:"dialog",on:{hide:e.onDialogHide}},[o("q-card",{staticClass:"q-dialog-plugin"},[o("q-card-section",[o("q-input",{ref:"roomNameInput",attrs:{filled:"",autofocus:"",label:"Room Name","lazy-rules":"",maxlength:e.$options.roomNameMaxLength,rules:[function(e){return e&&e.length>0||"Please enter the name of the room"},function(t){return!e.rooms.some((function(e){return e.name===t}))||"Room is already exist"}]},model:{value:e.roomName,callback:function(t){e.roomName=t},expression:"roomName"}})],1),o("q-card-section",[o("q-input",{attrs:{maxlength:e.$options.messageMaxLength,"input-style":"max-height:50vh",outlined:"",rounded:"",autogrow:"","bg-color":"white",placeholder:"Type a message",label:"First Message"},model:{value:e.firstMessage,callback:function(t){e.firstMessage=t},expression:"firstMessage"}})],1),o("q-card-actions",{attrs:{align:"right"}},[o("q-btn",{attrs:{color:"primary",label:"Cancel",flat:""},on:{click:e.onCancel}}),o("q-btn",{attrs:{color:"primary",label:"Add",rounded:"",outline:""},on:{click:e.onSubmit}})],1)],1)],1)},w=[],M=o("1732"),k={name:"CreateRoomForm",roomNameMaxLength:50,messageMaxLength:10500,props:{rooms:{required:!0,type:Array,default:function(){return[]}},currentUsername:{required:!0,type:String,default:null}},data:function(){return{roomName:"",firstMessage:"Room created"}},methods:{show:function(){this.$refs.dialog.show()},hide:function(){this.$refs.dialog.hide()},onDialogHide:function(){this.$emit("hide")},onSubmit:function(){var e={id:Object(M["a"])(),created:new Date,sender:{username:this.currentUsername},room:this.roomName,text:this.firstMessage};this.$refs.roomNameInput.validate()&&(this.$emit("ok",e),this.hide())},onCancel:function(){this.hide()}}},y=k,$=o("24e8"),I=o("f09f"),_=o("a370"),O=o("27f9"),N=o("4b7e"),Q=o("9c40"),j=Object(f["a"])(y,R,w,!1,null,null,null),L=j.exports;v()(j,"components",{QDialog:$["a"],QCard:I["a"],QCardSection:_["a"],QInput:O["a"],QCardActions:N["a"],QBtn:Q["a"]});var A={components:{RoomListItem:C},data:function(){return{}},computed:c()(c()(c()({},Object(l["c"])("room",{rooms:"getRooms"})),Object(l["c"])("user",{isLoggedIn:"isLoggedIn",getCurrentUser:"getCurrentUser"})),Object(l["c"])("settings",{isNoConnection:"isNoConnection"})),created:function(){var e=this;return s()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchAllRooms();case 2:case"end":return t.stop()}}),t)})))()},methods:c()(c()(c()({},Object(l["b"])("room",{fetchAllRooms:"fetchAll"})),Object(l["b"])("message",{sendMessage:"sendMessage"})),{},{openCreateRoomDialog:function(){var e=this;return new Promise((function(t,o){return e.$q.dialog({component:L,rooms:e.rooms,currentUsername:e.getCurrentUser.username,parent:e}).onOk(t).onCancel(o)}))},onAddRoom:function(){var e=this;return s()(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isLoggedIn){t.next=2;break}return t.abrupt("return",e.$emit("ask-login"));case 2:return t.prev=2,t.next=5,e.openCreateRoomDialog();case 5:return o=t.sent,t.next=8,e.sendMessage(o);case 8:e.$router.push({name:"room",params:{roomId:o.room}}),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),t.t0&&console.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,11]])})))()}})},D=A,S=o("4983"),U=o("1c1c"),B=Object(f["a"])(D,n,r,!1,null,null,null);t["default"]=B.exports;v()(B,"components",{QScrollArea:S["a"],QList:U["a"],QItemLabel:b["a"],QBtn:Q["a"]})}}]);