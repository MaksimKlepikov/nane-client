(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"713b":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-layout",{attrs:{view:"lHh LpR lFf"}},[n("q-header",{staticClass:"row no-wrap bg-primary text-white"},[e.isNoConnection?n("q-toolbar",{staticClass:"col-auto bg-grey-5"},[n("q-toolbar-title",[e._v("No connection")]),n("q-icon",{attrs:{name:"wifi_off",size:"sm"}})],1):e._e(),n("q-toolbar",{class:{"bg-grey-4":e.isNoConnection}},[e.isShowMenuButton?n("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu"},on:{click:function(t){e.leftDrawerOpen=!e.leftDrawerOpen}}}):e._e(),e.isShowBackButton?n("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"arrow_back","aria-label":"Back"},on:{click:function(t){return e.$router.go(-1)}}}):e._e(),n("q-toolbar-title",[e._v("\n        "+e._s(e.toolbarTitle)+"\n      ")])],1)],1),n("q-drawer",{attrs:{elevated:"",overlay:"","no-swipe-open":"","no-swipe-close":""},model:{value:e.leftDrawerOpen,callback:function(t){e.leftDrawerOpen=t},expression:"leftDrawerOpen"}},[n("div",{staticClass:"bg-primary q-pa-md text-center",staticStyle:{height:"110px"}},[e.isLoggedIn?n("div",{staticClass:" row items-center justify-center"},[n("div",[n("q-avatar",{staticClass:"col-auto",attrs:{color:"white","text-color":"primary",icon:"person"}})],1),e.currentUser?n("div",{staticClass:"col-12 ellipsis q-mt-sm text-white text-weight-bold"},[e._v("\n          "+e._s(e.currentUser.username)+"\n        ")]):e._e()]):n("div",{staticClass:"fit flex items-center justify-center"},[n("q-btn",{attrs:{disable:e.isNoConnection,rounded:"","no-caps":"",unelevated:"",color:"white","text-color":"primary",label:"Log In"},on:{click:e.onLogin}})],1)]),n("q-scroll-area",{staticStyle:{height:"calc(100% - 110px)"}},[e.isLoggedIn?n("div",{staticClass:"row q-pa-sm"},[n("q-btn",{staticClass:"col-12",attrs:{disable:e.isNoConnection,rounded:"",outline:"","no-caps":"",unelevated:"",color:"white","text-color":"primary",label:"Log In Another Account"},on:{click:e.onLogin,keypress:function(e){e.preventDefault()}}})],1):e._e(),n("user-list",{on:{loggedin:e.closeLeftDrawer}})],1)],1),n("q-page-container",[n("router-view",{on:{"ask-login":e.askLogin}})],1),e.leftDrawerOpen?n("div",{staticClass:"fixed-full dimmed cursor-pointer",on:{click:e.closeLeftDrawer}}):e._e()],1)},o=[],i=n("c973"),a=n.n(i),s=n("ded3"),c=n.n(s),l=(n("96cf"),n("b0c0"),n("d3b7"),n("e6cf"),n("2f62")),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-list",{attrs:{padding:"",separator:""}},[n("q-item-label",{staticClass:"text-grey-8",attrs:{header:""}},[e._v("\n    Accounts\n  ")]),e._l(e.users,(function(t){return n("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:t.username,attrs:{disable:e.isNoConnection,active:e.checkIfUserCurrent(t),clickable:""},on:{click:function(n){return e.onUserItemClick(t)}}},[n("q-item-section",{staticClass:"ellipsis"},[n("q-item-label",{staticClass:"ellipsis"},[e._v("\n        "+e._s(t.username)+"\n      ")])],1),n("q-item-section",{attrs:{avatar:""}},[n("q-icon",{attrs:{name:e.checkIfUserCurrent(t)?"logout":"login"}})],1)],1)}))],2)},d=[],m={data:function(){return{}},computed:c()(c()({},Object(l["c"])("user",{users:"getUsers",currentUser:"getCurrentUser"})),Object(l["c"])("websocket",{isNoConnection:"isNoConnection"})),methods:c()(c()({},Object(l["b"])("user",{switchCurrentUserTo:"switchCurrentUserTo",logout:"logout"})),{},{checkIfUserCurrent:function(e){var t;return(null===(t=this.currentUser)||void 0===t?void 0:t.username)===e.username},onUserItemClick:function(e){if(this.checkIfUserCurrent(e))return this.logout();this.switchCurrentUserTo(e.username),this.$emit("loggedin")}})},f=m,p=n("2877"),h=n("1c1c"),g=n("0170"),b=n("66e5"),w=n("4074"),v=n("0016"),C=n("714f"),k=n("eebe"),q=n.n(k),L=Object(p["a"])(f,u,d,!1,null,null,null),y=L.exports;q()(L,"components",{QList:h["a"],QItemLabel:g["a"],QItem:b["a"],QItemSection:w["a"],QIcon:v["a"]}),q()(L,"directives",{Ripple:C["a"]});var x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-dialog",{ref:"dialog",on:{hide:e.onDialogHide}},[n("q-card",{staticClass:"q-dialog-plugin"},[n("q-card-section",[n("div",{staticClass:"text-h6"},[e._v("\n        Login\n      ")])]),n("q-card-section",[n("q-input",{ref:"usernameInput",attrs:{filled:"",autofocus:"",label:"Username","lazy-rules":"",maxlength:e.maxLength.username,rules:[function(e){return e&&e.length>0||"Please enter the username"}]},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit(t)}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),n("q-card-actions",{attrs:{align:"right"}},[n("q-btn",{attrs:{color:"primary",label:"Cancel",flat:""},on:{click:e.onCancel}}),n("q-btn",{attrs:{color:"primary",label:"Login",rounded:"",outline:""},on:{click:e.onSubmit}})],1)],1)],1)},_=[],I={name:"LoginForm",data:function(){return{username:""}},computed:c()({},Object(l["c"])("settings",{maxLength:"getMaxLengthSettings"})),methods:{show:function(){this.$refs.dialog.show()},hide:function(){this.$refs.dialog.hide()},onDialogHide:function(){this.$emit("hide")},onSubmit:function(){this.$refs.usernameInput.validate()&&(this.$emit("ok",this.username),this.hide())},onCancel:function(){this.hide()}}},O=I,Q=n("24e8"),U=n("f09f"),D=n("a370"),$=n("27f9"),S=n("4b7e"),j=n("9c40"),N=Object(p["a"])(O,x,_,!1,null,null,null),B=N.exports;q()(N,"components",{QDialog:Q["a"],QCard:U["a"],QCardSection:D["a"],QInput:$["a"],QCardActions:S["a"],QBtn:j["a"]});var T={name:"MainLayout",components:{UserList:y},data:function(){return{leftDrawerOpen:!1}},computed:c()(c()(c()({},Object(l["c"])("user",{currentUser:"getCurrentUser",isLoggedIn:"isLoggedIn",users:"getUsers"})),Object(l["c"])("websocket",{isNoConnection:"isNoConnection"})),{},{isShowMenuButton:function(){return this.$q.platform.is.desktop||"room"!==this.$route.name},isShowBackButton:function(){return this.$q.platform.is.mobile&&"room"===this.$route.name},toolbarTitle:function(){var e;return this.$route.params.roomId||(null===(e=this.currentUser)||void 0===e?void 0:e.username)}}),methods:c()(c()({},Object(l["b"])("user",{login:"login"})),{},{askLogin:function(){if(0===this.users.length)return this.onLogin();this.openLeftDrawer(),this.$q.notify({message:"Please Log In",position:"center",color:"primary",timeout:500})},closeLeftDrawer:function(){this.leftDrawerOpen=!1},openLeftDrawer:function(){this.leftDrawerOpen=!0},onLogin:function(){var e=this;return a()(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.openLoginForm();case 3:return n=t.sent,t.next=6,e.login(n);case 6:e.closeLeftDrawer(),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),t.t0&&console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},openLoginForm:function(){var e=this;return new Promise((function(t,n){return e.$q.dialog({component:B,parent:e}).onOk(t).onCancel(n)}))}})},A=T,M=n("4d5a"),E=n("e359"),F=n("65c6"),H=n("6ac5"),P=n("9404"),R=n("cb32"),z=n("4983"),J=n("09e3"),G=Object(p["a"])(A,r,o,!1,null,null,null);t["default"]=G.exports;q()(G,"components",{QLayout:M["a"],QHeader:E["a"],QToolbar:F["a"],QToolbarTitle:H["a"],QIcon:v["a"],QBtn:j["a"],QDrawer:P["a"],QAvatar:R["a"],QScrollArea:z["a"],QPageContainer:J["a"]})}}]);